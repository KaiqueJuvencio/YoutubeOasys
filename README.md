#  :film_projector: YoutubeOasys :clapper:

YoutubeOasys is an application that will pull data from some videos that have been uploaded to a YouTube channel.
It's data is based on search feature of Youtube.

## Features

- Create task to parse the channel videos :heavy_check_mark:
- Consult the list of created tasks :heavy_check_mark:
- Consult the data about the channel and it's videos :heavy_check_mark:

## Tech Stack

<div style="display: inline_block">
    <img align="center" alt="Java" height="50" width="50" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg">
    <img align="center" alt="Postgres" height="50" width="50"  src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" />
    <img align="center" alt="Docker" height="70" width="70" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" />
</div>
<br>
Used technologies to build the application

- Java (jdk-11.0.2) | Spring Boot, JPA, Hibernate, Swagger, OpenFeign, Devtools, Maven (3.8.5), Lombok
- Postgres
- Docker
- Docker Compose
- Test Containers
- Github Features (Issues, Pull Requests)

### :hot_pepper: Lombok:
How to install Lombok for your IDE avaiable at: https://projectlombok.org/setup/overview

## Local Setup

To start the local application, run the commands below on project root:

1¬∫:
```bash
mvn clean install
```
2¬∫:
```bash
docker-compose build --no-cache
```
3¬∫
```bash
docker-compose up --force-recreate
```

It will run 2 containers: 

- Postgres database container (db) |  localhost:15432
- Java backend container (app) | localhost:8080

## 	:earth_americas: API Endpoints

Before backend build (app) it will be avaiable at:
http://localhost:8080/swagger-ui.html

### (POST) /api/tasks/{youtubeChannelId}
This endpoint will call YouTube API according to the youtubeChannelId that the user set, then it will get the most successful videos of this channel and save it in the database.

### Example:
Example channel used was MrBeast: https://www.youtube.com/c/MrBeast6000

Request

```bash
http://localhost:8080/api/tasks/UCX6OQ3DkcsbYNE6H8uQQuVA
```

Response

```json
{
    "id": 1,
    "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA"
}
```
#

### (GET) /api/tasks/
This endpoint will return all created tasks

### Example:

Request

```bash
http://localhost:8080/api/tasks/
```

Response

```json
[
    {
        "id": 1,
        "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA"
    },
    {
        "id": 2,
        "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA"
    }
]
```
#

### (GET) /api/tasks/{taskId}
This endpoint will return the most successful videos of a channel when a specific task was created

### Example:

Request

```bash
http://localhost:8080/api/tasks/1
```

Response

```json
[
    {
        "id": 1,
        "videoId": "0e3GPea1Tyg",
        "title": "$456,000 Squid Game In Real Life!",
        "description": "MAKE SURE YOU WATCH UNTIL GLASS BRIDGE IT'S INSANE! Download Brawl Stars now and get a free gift from me in the ...",
        "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA",
        "channelTitle": "MrBeast",
        "thumbnailUrl": "https://i.ytimg.com/vi/0e3GPea1Tyg/hqdefault.jpg",
        "url": "https://www.youtube.com/watch?v=0e3GPea1Tyg",
        "tasks": {
            "id": 1,
            "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA"
        }
    },
    {
        "id": 2,
        "videoId": "r7zJ8srwwjk",
        "title": "I Spent 50 Hours In Solitary Confinement",
        "description": "i borderline went crazy about 30 hours in... New Merch - https://shopmrbeast.com/ SUBSCRIBE OR I TAKE YOUR DOG ...",
        "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA",
        "channelTitle": "MrBeast",
        "thumbnailUrl": "https://i.ytimg.com/vi/r7zJ8srwwjk/hqdefault.jpg",
        "url": "https://www.youtube.com/watch?v=r7zJ8srwwjk",
        "tasks": {
            "id": 1,
            "channelId": "UCX6OQ3DkcsbYNE6H8uQQuVA"
        }
    }
]
```
## :x: Exception Handler

### BadRequestException

### Example:

Request

```bash
Any bad request or error
```

Response

```json
{
    "timestamp": "2022/03/23 - 03:36",
    "message": "Error to find videos by task id.",
    "errorCode": 400,
    "errorType": "BAD_REQUEST",
    "pathUri": "/api/tasks/cant-have-letters-here"
}
```

## üìä Database Tables


### TB_VIDEO

| Fields                  |  Type        | Description |
| ----------------------- | :----------: | ----------: |
| id                      |  int         | Primary key |
| channel_id              | varchar(255) | Channel unique id generated by Youtube      |
| channel_title           | varchar(255) | Channel name           |
| description             | varchar(255) | Video description      |
| thumbnail_url           | varchar(255) | Thumbnail .jpg url     |
| title                   | varchar(255) | Video title            |
| tasks_id                |  int         | FK (TB_TASK)           |
| url                     | varchar(255) | Video url on Youtube   |

### TB_TASK

| Fields                  |  Type        | Description |
| ----------------------- | :----------: | ----------: |
| id                      |  int         | Primary key |
| channel_id              | varchar(255) | Channel unique id generated by Youtube      |

## ‚úçÔ∏è Author

 [<img src="https://github.com/KaiqueJuvencio.png" width="130px;"/><br /><sub>**Kaique Juvencio**</sub>](https://github.com/KaiqueJuvencio)<br /> 
 
 <h2>Reach me out üëáüèº</h2>

[![Linkedin Badge](https://img.shields.io/badge/-LinkedIn-blue?style=flat-square&logo=Linkedin&logoColor=white&link=https://www.linkedin.com/in/kaiquejuvencio/)](https://www.linkedin.com/in/kaiquejuvencio/) [![Gmail Badge](https://img.shields.io/badge/-kaiquejuvenciocosta@gmail.com-c14438?style=flat-square&logo=Gmail&logoColor=white&link=mailto:kaiquejuvenciocosta@gmail.com)](mailto:kaiquejuvenciocosta@gmail.com)

